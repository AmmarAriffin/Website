{{ $image := resources.Get (printf "images/%s" (.Get "src")) }}
{{ $scaleFactor := float (.Get "scale") }}
{{ $width := mul $scaleFactor (div (int $image.Width) 100.0) }}
{{ $resized := $image.Resize (print (int $width) "x q100") }}

<figure class="image-container">
    <img src="{{ $resized.RelPermalink }}" id="{{ .Get "id" }}">
    <figcaption class="caption"> {{ .Get "caption" }} </figcaption>
</figure>