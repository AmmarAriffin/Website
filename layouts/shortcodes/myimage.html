{{ $image := resources.Get (printf "images/%s" (.Get "src")) }}
{{ $scaleFactor := float (.Get "scale") }}
{{ $width := mul $scaleFactor (div (int $image.Width) 100.0) }}
{{ $resized := $image.Resize (print (int $width) "x q100") }}

<figure class="image-container" style="width: {{ $width }}; height: auto;">
    <img src="{{ $resized.RelPermalink }}"  style="{{ .Get "style" }}">
    <figcaption class="caption" id="{{ .Get "id" }}" > {{ .Get "caption" }} </figcaption>
</figure>